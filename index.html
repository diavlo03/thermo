<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LAWS OF THERMODYNAMICS AND HEAT ENGINES</title>
  <style>
    body {
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      padding: 0 0 3rem 0;
      color: #222;
      background: #1a0900;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    #fire-canvas {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      z-index: -1;
      pointer-events: none;
      display: block;
    }
    header {
      background-color: rgba(34, 34, 34, 0.92);
      color: #fff;
      padding: 1.5rem 1rem 1rem 1rem;
      text-align: center;
      letter-spacing: 2px;
      box-shadow: 0 6px 20px -10px #222a;
      animation: fadeInDown 1.2s;
    }
    @keyframes fadeInDown {
      from { transform: translateY(-40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .nav-btn-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      background: #444c;
      padding: 1rem 0.5rem;
      box-shadow: 0 4px 12px -8px #222a;
      animation: fadeInDown 1.7s;
    }
    .nav-btn {
      background: #e02c00;
      color: #fff;
      border: none;
      outline: none;
      font-size: 1.05rem;
      font-family: inherit;
      padding: 0.7em 1.5em;
      margin: 0.2em 0;
      border-radius: 9px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px -2px #ff800066;
      transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    }
    .nav-btn:hover,
    .nav-btn.active {
      background: #ff8000;
      color: #fff;
      transform: scale(1.06);
      box-shadow: 0 4px 16px -4px #ff8000aa;
    }
    section {
      padding: 2rem;
      max-width: 850px;
      margin: 2.5rem auto 0 auto;
      background: rgba(255,255,255,0.87);
      border-radius: 18px;
      box-shadow: 0 4px 32px -8px #0002;
      transition: box-shadow 0.6s;
      animation: fadeIn 1.2s;
      display: none;
    }
    section.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.98);}
      to { opacity: 1; transform: scale(1);}
    }
    h2 {
      border-bottom: 2px solid #444;
      padding-bottom: 0.5rem;
      margin-top: 2rem;
      letter-spacing: 1.5px;
      animation: slideInLeft 1s;
    }
    @keyframes slideInLeft {
      from { transform: translateX(-60px); opacity: 0;}
      to { transform: translateX(0); opacity: 1;}
    }
    h3 {
      margin-top: 1.6rem;
      color: #e02c00;
      letter-spacing: 1px;
      animation: fadeIn 1.6s;
    }
    .law-tag {
      display: inline-block;
      background: #fa8900;
      color: #fff;
      border-radius: 6px;
      padding: 0.2em 0.8em;
      font-size: 0.95em;
      margin-bottom: 0.8em;
      margin-top: 0.4em;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .formula {
      display: inline-block;
      background: #f8e4bd;
      border-radius: 5px;
      padding: 0.25em 0.7em;
      font-family: 'Consolas', 'Menlo', 'Monaco', 'monospace';
      font-size: 1.1em;
      margin: 0.3em 0;
    }
    .quiz {
      margin-top: 2rem;
      padding: 1.2rem;
      background: linear-gradient(120deg,#fff3cd 70%,#ffdde1 100%);
      border: 1px solid #ffeeba;
      border-radius: 12px;
      box-shadow: 0 2px 10px -6px #2222;
      animation: pulse 2s infinite alternate;
    }
    @keyframes pulse {
      from { box-shadow: 0 2px 10px -6px #2222;}
      to { box-shadow: 0 6px 20px -10px #ff8000;}
    }
    .quiz label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: background 0.2s, padding 0.2s;
      border-radius: 6px;
      padding: 4px 8px;
    }
    .quiz label:hover {
      background: #ffeeba;
      padding-left: 16px;
    }
    button[type="button"] {
      margin-top: 0.8rem;
      padding: 0.5rem 1.4rem;
      background: #e02c00;
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      box-shadow: 0 2px 8px -2px #ff800066;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      font-size: 1rem;
      letter-spacing: 1px;
    }
    button[type="button"]:hover {
      background: #ff8000;
      transform: scale(1.08);
    }
    #quiz-result {
      margin-top: 0.7rem;
      font-weight: bold;
      min-height: 1.5em;
    }
    img, video {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 1.5rem auto;
      border-radius: 12px;
      box-shadow: 0 2px 16px -6px #e02c0066;
      animation: fadeIn 2s;
    }
    ul {
      padding-left: 1.2em;
      animation: fadeIn 2.2s;
    }
    @media (max-width: 600px) {
      .nav-btn-group { flex-direction: column; gap: 0.5rem; }
      section { padding: 1rem; }
    }
  </style>
</head>
<body>
  <canvas id="fire-canvas"></canvas>
  <header>
    <h1>LAWS OF THERMODYNAMICS AND HEAT ENGINES <span style="font-size:0.7em; color:#ff8000;">v6</span></h1>
  </header>
  <nav class="nav-btn-group" id="navBtnGroup">
    <button class="nav-btn active" data-target="intro">Introduction</button>
    <button class="nav-btn" data-target="heat-engines">Heat Engines</button>
    <button class="nav-btn" data-target="internal-combustion">Internal-Combustion Engines</button>
    <button class="nav-btn" data-target="refrigerators">Refrigerators</button>
    <button class="nav-btn" data-target="second-law">Second Law</button>
    <button class="nav-btn" data-target="entropy">Entropy</button>
    <button class="nav-btn" data-target="quiz">Quiz</button>
    <button class="nav-btn" data-target="references">References</button>
  </nav>

  <section id="intro" class="active">
    <h2>Introduction</h2>
    <p>
      The laws of thermodynamics describe how energy moves and changes in the universe. These principles set the foundation for understanding physical processes such as heat transfer, energy conversion, and the operation of engines and refrigerators. In this report, we will examine the core concepts and principles behind heat engines, internal-combustion engines, refrigerators, the second law of thermodynamics, and entropy.
    </p>
  </section>

  <section id="heat-engines">
    <h2>Heat Engines</h2>
    <div class="law-tag">Illustrates: 1st &amp; 2nd Laws</div>
    <p>
      <strong>Heat engines</strong> are devices that convert thermal energy into mechanical work by exploiting the temperature difference between a hot reservoir and a cold reservoir. The basic principle is that heat flows naturally from hot to cold, and a heat engine harnesses a portion of this flow to perform work (such as moving a piston or turning a turbine). 
    </p>
    <ul>
      <li>The engine absorbs heat energy (<span class="formula">Q<sub>in</sub></span>) from the hot reservoir.</li>
      <li>Part of this energy is converted into useful work (<span class="formula">W</span>).</li>
      <li>The remaining energy is expelled as waste heat (<span class="formula">Q<sub>out</sub></span>) to the cold reservoir.</li>
    </ul>
    <p>
      The <strong>First Law of Thermodynamics</strong> (law of energy conservation) is honored as energy is neither created nor destroyed—just transferred and transformed.<br>
      The <strong>Second Law of Thermodynamics</strong> is illustrated because not all input heat can become work; some energy must be expelled as waste heat.
    </p>
    <p>
      Efficiency of a heat engine:
      <span class="formula">&eta; = W / Q<sub>in</sub></span>
      <br>
      or, equivalently:
      <span class="formula">&eta; = 1 - (Q<sub>out</sub> / Q<sub>in</sub>)</span>
    </p>
    <p>
      The diagram below shows a simplified model of a typical heat engine operating between two thermal reservoirs. This model is a foundational concept in thermodynamics and can be found in many physics textbooks, such as Serway & Jewett, and in the CK-12 and Physics.info references.
    </p>
    <img src="heatengine1.png" alt="Heat Engine Diagram">
    <p>
      Here’s how the process works, step by step:
    </p>
    <ul>
      <li>
        <strong>Hot Reservoir (T<sub>h</sub>):</strong> This is the source of thermal energy at a high temperature. The engine absorbs a quantity of heat energy, <strong>Q<sub>in</sub></strong>, from this reservoir.
      </li>
      <li>
        <strong>Engine (Working Substance):</strong> The working substance could be a gas in a piston, steam in a turbine, or any medium that can absorb and release heat while expanding and contracting. As the working substance cycles, it does mechanical work <strong>W</strong> (for example, moving a piston or turning a generator).
      </li>
      <li>
        <strong>Cold Reservoir (T<sub>c</sub>):</strong> Not all heat absorbed from the hot reservoir can be converted to work. Some energy, <strong>Q<sub>out</sub></strong>, must be expelled to a colder reservoir, as required by the second law of thermodynamics.
      </li>
      <li>
        <strong>Energy Flow:</strong> The arrows in the diagram show the flow of energy: <strong>Q<sub>in</sub></strong> enters from the hot reservoir, <strong>Q<sub>out</sub></strong> exits to the cold reservoir, and the difference between them is the useful work <strong>W</strong> extracted by the engine (<strong>W = Q<sub>in</sub> - Q<sub>out</sub></strong>).
      </li>
      <li>
        <strong>Efficiency and the Diagram:</strong> The diagram directly illustrates the efficiency formula above. The fraction of input heat, <strong>Q<sub>in</sub></strong>, that is converted to work (<strong>W</strong>) determines the engine's efficiency <span class="formula">&eta; = W / Q<sub>in</sub></span>. The remainder (<strong>Q<sub>out</sub></strong>) is the unavoidable waste heat expelled to the cold reservoir, which is why the alternative efficiency expression <span class="formula">&eta; = 1 - (Q<sub>out</sub> / Q<sub>in</sub>)</span> is also shown. The closer <strong>Q<sub>out</sub></strong> is to zero, the more efficient the engine—however, according to the second law, <strong>Q<sub>out</sub></strong> can never be zero in a real engine.
      </li>
      <li>
        <strong>Typical Examples:</strong> Car engines, steam turbines, and power plants all operate on this basic principle. In all real applications, friction, heat leaks, and other losses further reduce actual efficiency below the theoretical maximum.
      </li>
    </ul>
    <p>
      This diagram helps visualize the key functions and constraints of all heat engines, making it easier to understand why both the first and second laws of thermodynamics govern their operation, and how the efficiency formulas arise from the energy flows within the system.
    </p>
  </section>

  <section id="internal-combustion">
    <h2>Internal-Combustion Engines</h2>
    <div class="law-tag">Illustrates: 1st &amp; 2nd Laws</div>
    <p>
      <strong>Internal-combustion engines</strong> are a specific type of heat engine in which the combustion of fuel occurs inside the working chamber (such as a cylinder). The rapid burning of fuel produces high-pressure gases, which push against pistons or turn turbines, directly converting chemical energy into mechanical work. 
    </p>
    <ul>
      <li>Commonly used in cars, motorcycles, and airplanes.</li>
      <li>Examples include gasoline engines and diesel engines.</li>
      <li>They rely on cycles (such as the Otto or Diesel cycle) to manage intake, compression, power, and exhaust strokes.</li>
    </ul>
    <p>
      Internal-combustion engines follow the <strong>First Law of Thermodynamics</strong> as chemical (fuel) energy is transformed into work and heat.<br>
      The <strong>Second Law of Thermodynamics</strong> appears as not all fuel energy is converted to work—some is always lost as heat and exhaust.
    </p>
  </section>

  <section id="refrigerators">
    <h2>Refrigerators</h2>
    <div class="law-tag">Illustrates: 1st &amp; 2nd Laws</div>
    <p>
      <strong>Refrigerators</strong> are devices that use work to transfer heat from a low-temperature area (inside the fridge) to a high-temperature area (outside the fridge). This process is essentially the reverse of a heat engine. Instead of converting heat to work, refrigerators use work (usually provided by an electric compressor) to move heat against its natural direction.
    </p>
    <ul>
      <li>Heat is removed from the cold interior and expelled to the warmer environment.</li>
      <li>This process requires external energy input.</li>
      <li>Examples include home refrigerators, air conditioners, and heat pumps.</li>
    </ul>
    <p>
      According to the <strong>First Law of Thermodynamics</strong>, the total energy is conserved (work input plus heat taken from the cold area equals heat expelled to the warm area).<br>
      The <strong>Second Law of Thermodynamics</strong> explains why refrigerators need external work: heat doesn’t spontaneously flow from cold to hot.
    </p>
    <p>
      <strong>General COP:</strong>
      <span class="formula">COP = Q<sub>cold</sub> / W</span>
      <br>
      <strong>COP for a perfect (Carnot) refrigerator:</strong>
      <span class="formula">COP<sub>Carnot</sub> = T<sub>cold</sub> / (T<sub>hot</sub> - T<sub>cold</sub>)</span>
    </p>
    <p>
      The diagram below shows how a refrigerator keeps food and drinks cold by moving heat from inside the fridge to the outside. The process works in a closed loop and involves four main parts: the <strong>evaporator</strong>, <strong>expansion valve</strong>, <strong>condenser</strong>, and <strong>compressor</strong>.
    </p>
    <p>
      Here’s how each step works:
    </p>
    <ul>
      <li>
        <strong>Evaporator:</strong> Inside the refrigerator, the refrigerant is at a low temperature and low pressure. In this state, it absorbs heat from the food and air inside, causing it to evaporate and turn into a cold gas. This is what keeps the inside of the fridge cool.
      </li>
      <li>
        <strong>Compressor:</strong> The compressor squeezes this cold gas, making it hot and increasing its pressure. Now, the refrigerant is a hot, high-pressure gas, which is pushed towards the condenser.
      </li>
      <li>
        <strong>Condenser:</strong> At the back (or bottom) of the fridge, the hot, high-pressure gas releases its heat to the outside air and cools down, turning into a liquid. This is why the back of your refrigerator feels warm.
      </li>
      <li>
        <strong>Expansion Valve:</strong> The high-pressure liquid refrigerant now passes through the expansion valve, where its pressure quickly drops. This makes the refrigerant cold again, and it re-enters the evaporator to repeat the cycle.
      </li>
      <li>
        <strong>Drying Filter:</strong> There is also a drying filter that removes moisture and tiny particles from the refrigerant, helping the system run smoothly.
      </li>
    </ul>
    <p>
      The colored arrows and labels in the diagram help you follow the flow and state of the refrigerant through each stage—showing whether it is a gas or liquid, and whether it is hot or cold. By constantly cycling the refrigerant through these steps, the refrigerator is able to take heat from inside the fridge and move it outside, keeping your food cold and fresh.
    </p>
    <img src="refrigerator1.jpg" alt="Refrigerator Diagram">

    <h3>The Carnot Cycle and the Reversed Carnot Cycle</h3>
    <p>
      To understand the ultimate limits of a refrigerator’s performance, we consider the <strong>Carnot cycle</strong> and its reverse.
    </p>
    <ul>
      <li>
        The <strong>Carnot cycle</strong> describes an idealized heat engine that operates between two temperature reservoirs with maximum possible efficiency, determined only by the temperatures of the hot and cold reservoirs.
        <br>
        <span class="formula">&eta;<sub>Carnot</sub> = 1 - (T<sub>cold</sub>/T<sub>hot</sub>)</span>
      </li>
      <li>
        The <strong>reversed Carnot cycle</strong> is a theoretical model for a perfect refrigerator or heat pump. When run in reverse, the Carnot engine absorbs heat from the cold reservoir and releases it to the hot reservoir, using the minimum work possible for a given amount of heat transfer.
      </li>
      <li>
        The maximum possible <strong>coefficient of performance (COP)</strong> for any refrigerator is set by the reversed Carnot cycle:
        <br>
        <span class="formula">COP<sub>Carnot</sub> = T<sub>cold</sub> / (T<sub>hot</sub> - T<sub>cold</sub>)</span>
        <br>
        Here, <strong>T<sub>cold</sub></strong> and <strong>T<sub>hot</sub></strong> are the absolute temperatures (in Kelvin) of the inside and outside of the fridge, respectively.
      </li>
    </ul>
    <p>
      In the <strong>refrigerator diagram above</strong>, the flow of the refrigerant and the direction of heat transfer represent the practical implementation of the reversed Carnot cycle. While real refrigerators are less efficient than a Carnot refrigerator due to friction, non-ideal materials, and other losses, the Carnot cycle sets the <strong>theoretical upper limit</strong> for efficiency and performance.
    </p>
    <p>
      In summary, the reversed Carnot cycle helps us understand how refrigerators can ideally transfer heat from cold to hot, and why their efficiency always depends on the temperature difference between the inside and outside of the refrigerator.
    </p>
  </section>

  <section id="second-law">
    <h2>Second Law of Thermodynamics</h2>
    <div class="law-tag">The Law of Entropy/Irreversibility</div>
    <p>
      The <strong>Second Law of Thermodynamics</strong> states that the total entropy of an isolated system can never decrease over time; it can only increase or remain constant. This law explains why certain processes occur spontaneously (such as heat flowing from hot to cold) and why energy conversions are never 100% efficient.
    </p>
    <ul>
      <li>No heat engine can convert all absorbed heat into work; some energy is always lost as waste heat.</li>
      <li>The direction of natural processes is governed by an increase in entropy (disorder).</li>
      <li>This law introduces the concept of irreversibility in real-world systems.</li>
    </ul>
  </section>

  <section id="entropy">
    <h2>Entropy and the Third Law of Thermodynamics</h2>
    <div class="law-tag">The Law of Absolute Zero</div>
    <p>
      <strong>Entropy</strong> is a measure of disorder or randomness in a system. As energy becomes more evenly distributed, entropy increases. The <strong>Third Law of Thermodynamics</strong> states that as the temperature of a perfect crystal approaches absolute zero (0 Kelvin), its entropy approaches zero.
    </p>
    <ul>
      <li>Entropy helps predict the direction of chemical and physical processes.</li>
      <li>High entropy means high disorder (e.g., gas molecules spread out in a room).</li>
      <li>At absolute zero, a system is in perfect order with minimum possible entropy.</li>
    </ul>
    <h3>Key Formulas</h3>
    <ul>
      <li><span class="formula">&eta; = W / Q<sub>in</sub></span> &nbsp; <em>(Efficiency of a heat engine)</em></li>
      <li><span class="formula">&Delta;S = Q / T</span> &nbsp; <em>(Change in entropy, where Q = heat transferred, T = temperature in Kelvin)</em></li>
    </ul>
  </section>

  <section id="quiz" class="quiz">
    <h2>Quiz</h2>
    <form id="thermo-quiz">
      <ol id="quiz-questions"></ol>
      <button type="button" onclick="checkQuiz()">Check Answers</button>
      <p id="quiz-result"></p>
    </form>
    <script>
      // 10-question quiz
      const quizData = [
        {
          q: "What does the second law of thermodynamics imply about entropy?",
          choices: [
            "It decreases in isolated systems",
            "It stays constant in all systems",
            "It increases in isolated systems",
            "It fluctuates randomly"
          ],
          correct: 2
        },
        {
          q: "What is the main function of a heat engine?",
          choices: [
            "To transfer heat from a cold reservoir to a hot reservoir",
            "To convert thermal energy into mechanical work",
            "To decrease the entropy of the universe",
            "To create energy from nothing"
          ],
          correct: 1
        },
        {
          q: "According to the third law of thermodynamics, as temperature approaches absolute zero, the entropy of a perfect crystal:",
          choices: [
            "Becomes infinite",
            "Approaches zero",
            "Remains the same as at room temperature",
            "Doubles"
          ],
          correct: 1
        },
        {
          q: "Which law states that energy is neither created nor destroyed?",
          choices: [
            "First Law of Thermodynamics",
            "Second Law of Thermodynamics",
            "Third Law of Thermodynamics",
            "Law of Conservation of Momentum"
          ],
          correct: 0
        },
        {
          q: "Which device uses work to transfer heat from a cold region to a hot region?",
          choices: [
            "Heat Engine",
            "Refrigerator",
            "Steam Engine",
            "Combustion Chamber"
          ],
          correct: 1
        },
        {
          q: "What is the formula for efficiency (&eta;) of a heat engine?",
          choices: [
            "&eta; = Q<sub>out</sub> / Q<sub>in</sub>",
            "&eta; = W / Q<sub>in</sub>",
            "&eta; = Q<sub>in</sub> / W",
            "&eta; = Q / T"
          ],
          correct: 1
        },
        {
          q: "Which cycle is commonly used in gasoline engines?",
          choices: [
            "Carnot Cycle",
            "Otto Cycle",
            "Rankine Cycle",
            "Stirling Cycle"
          ],
          correct: 1
        },
        {
          q: "What is the function of entropy in thermodynamics?",
          choices: [
            "Measure of pressure",
            "Measure of disorder",
            "Measure of energy",
            "Measure of temperature"
          ],
          correct: 1
        },
        {
          q: "Which of the following best describes the Second Law of Thermodynamics?",
          choices: [
            "Heat can flow spontaneously from cold to hot without work",
            "Entropy of an isolated system never decreases",
            "All engines are 100% efficient",
            "Energy is destroyed in conversions"
          ],
          correct: 1
        },
        {
          q: "Coefficient of Performance (COP) for a refrigerator is:",
          choices: [
            "COP = Q<sub>in</sub> / W",
            "COP = W / Q<sub>in</sub>",
            "COP = Q<sub>cold</sub> / W",
            "COP = Q<sub>hot</sub> / W"
          ],
          correct: 2
        }
      ];

      // Render quiz questions
      const ol = document.getElementById('quiz-questions');
      quizData.forEach((q, i) => {
        const li = document.createElement('li');
        li.innerHTML = `<div>${q.q}</div>`;
        q.choices.forEach((choice, cidx) => {
          const inputId = `q${i}_c${cidx}`;
          li.innerHTML += `
            <label>
              <input type="radio" name="q${i}" value="${cidx}" id="${inputId}"> <span>${choice}</span>
            </label>
          `;
        });
        ol.appendChild(li);
      });

      function checkQuiz() {
        let score = 0;
        let feedback = [];
        let wrongs = [];
        for (let i = 0; i < quizData.length; i++) {
          const radios = document.getElementsByName('q' + i);
          let answered = false;
          let val = null;
          for (let r of radios) {
            if (r.checked) {
              answered = true;
              val = parseInt(r.value);
              break;
            }
          }
          if (answered) {
            if (val === quizData[i].correct) {
              score++;
              feedback.push(`Q${i+1}: Correct!`);
            } else {
              feedback.push(`Q${i+1}: Incorrect. Correct answer is: "${quizData[i].choices[quizData[i].correct]}"`);
              wrongs.push(i+1);
            }
          } else {
            feedback.push(`Q${i+1}: Not answered.`);
            wrongs.push(i+1);
          }
        }
        const result = document.getElementById('quiz-result');
        result.innerHTML = feedback.join("<br>") + `<br><br><span style="font-size:1.1em;">Your Score: ${score}/${quizData.length}</span>`;
        result.style.color = score === quizData.length ? "green" : (score >= quizData.length*0.7 ? "#fa8900" : "red");
      }
    </script>
  </section>

  <section id="references">
    <h2>References</h2>
    <ul>
      <li>Serway, R.A., & Jewett, J.W. <em>Physics for Scientists and Engineers</em></li>
      <li><a href="https://physics.info/thermodynamics" target="_blank">Physics.info: Thermodynamics</a></li>
      <li><a href="https://www.ck12.org/physics/laws-of-thermodynamics/" target="_blank">CK-12: Laws of Thermodynamics</a></li>
      <li><a href="https://www.ck12.org/physics/heat-engines/" target="_blank">CK-12: Heat Engines</a></li>
      <li><a href="https://www.ck12.org/physics/refrigerators-and-heat-pumps/" target="_blank">CK-12: Refrigerators and Heat Pumps</a></li>
      <li><a href="https://www.ck12.org/physics/entropy/" target="_blank">CK-12: Entropy</a></li>
    </ul>
  </section>
  <script>
    // Section show/hide logic for button nav
    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.getAttribute('data-target');
        document.querySelectorAll('section').forEach(sec => {
          if (sec.id === target) sec.classList.add('active');
          else sec.classList.remove('active');
        });
        // Scroll to top for mobile usability
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // Fire and sparks/embers particle animation
    const canvas = document.getElementById('fire-canvas');
    const ctx = canvas.getContext('2d');
    let W = window.innerWidth;
    let H = window.innerHeight;
    function resizeCanvas() {
      W = window.innerWidth; H = window.innerHeight;
      canvas.width = W;
      canvas.height = H;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const fireParticles = [];
    const emberParticles = [];
    function randomBetween(a,b) { return a + Math.random()*(b-a); }
    function newFireParticle() {
      // Make the fire wider and taller
      const baseX = W/2 + randomBetween(-160,160);
      return {
        x: baseX + randomBetween(-40,40),
        y: H - 90 + randomBetween(-20,20),
        vx: randomBetween(-1.3,1.3),
        vy: randomBetween(-5.5,-2.2),
        radius: randomBetween(34,68),
        age: 0,
        maxAge: randomBetween(85,160),
        baseHue: randomBetween(26,48),
        alpha: randomBetween(0.18,0.36)
      };
    }
    function newEmberParticle() {
      // Embers are smaller, fly higher, and are more orange/yellow
      const baseX = W/2 + randomBetween(-120,120);
      return {
        x: baseX + randomBetween(-30,30),
        y: H - 100 + randomBetween(-18,18),
        vx: randomBetween(-0.7,0.7),
        vy: randomBetween(-5.8,-2.8),
        radius: randomBetween(2.2,5.5),
        age: 0,
        maxAge: randomBetween(60,170),
        hue: randomBetween(26,46),
        sat: randomBetween(70,98),
        light: randomBetween(56,80),
        alpha: randomBetween(0.14,0.32)
      };
    }
    function draw() {
      ctx.clearRect(0, 0, W, H);
      // Fire glow
      let grad = ctx.createRadialGradient(W/2, H-60, 0, W/2, H-60, 220);
      grad.addColorStop(0, "rgba(255,170,50,0.21)");
      grad.addColorStop(1, "rgba(255,170,50,0)");
      ctx.beginPath();
      ctx.arc(W/2, H-60, 220, 0, 2*Math.PI);
      ctx.fillStyle = grad;
      ctx.fill();

      // Add new fire particles
      if (fireParticles.length < 130) {
        for (let i=0;i<4;i++) fireParticles.push(newFireParticle());
      }
      // Add ember particles (sparks)
      if (emberParticles.length < 34 && Math.random() < 0.7) {
        emberParticles.push(newEmberParticle());
      }

      // Draw embers first (so fire is in front)
      for (let i=emberParticles.length-1;i>=0;i--) {
        let p = emberParticles[i];
        // Flicker and physics
        p.x += p.vx + randomBetween(-0.19,0.19);
        p.y += p.vy + randomBetween(-0.28,-0.04);
        p.radius *= randomBetween(0.98,1.02);
        p.age++;
        // Ember color
        let hue = p.hue + Math.sin(Date.now()/90 + p.x*0.06)*5;
        let sat = p.sat + randomBetween(-10,8);
        let light = p.light + Math.sin(Date.now()/140 + p.y*0.03)*12;
        ctx.save();
        ctx.globalAlpha = Math.max(0, p.alpha * (1 - p.age/p.maxAge));
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2*Math.PI);
        ctx.fillStyle = `hsl(${hue},${sat}%,${light}%)`;
        ctx.shadowColor = "#ffd580";
        ctx.shadowBlur = 16 + Math.random()*6;
        ctx.fill();
        ctx.restore();
        // Remove if too old
        if (p.age > p.maxAge || p.radius < 0.8 || p.y < 0) emberParticles.splice(i,1);
      }

      // Draw fire particles
      for (let i=fireParticles.length-1;i>=0;i--) {
        let p = fireParticles[i];
        p.x += p.vx + randomBetween(-0.36,0.36);
        p.y += p.vy + randomBetween(-0.14,0.14);
        p.radius *= randomBetween(0.97,1.01);
        p.age++;
        let flicker = Math.sin(Date.now()/66 + p.x*0.1)*randomBetween(1,2.3);
        let hue = p.baseHue + flicker*4 + p.age*0.24;
        let sat = 97 - Math.min(p.age*0.33,36);
        let light = 54 + flicker*10 - (p.age*0.22);
        ctx.save();
        ctx.globalAlpha = Math.max(0, p.alpha * (1 - p.age/p.maxAge));
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2*Math.PI);
        ctx.fillStyle = `hsl(${hue},${sat}%,${light}%)`;
        ctx.shadowColor = "#ff9900";
        ctx.shadowBlur = 38 + flicker*4;
        ctx.fill();
        ctx.restore();
        if (p.age > p.maxAge || p.radius < 2) fireParticles.splice(i,1);
      }
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
